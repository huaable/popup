!function(t){t.popup=function(t){return new o(t)};var o=function(o){var e={close:"remove",title:"",content:"",button:[],width:"90%",height:"auto",fullScreen:!1,modal:!1,callback:null,className:""};this.options=t.extend(e,o),this.init()};o.prototype={init:function(){var o=this;if(o.$element=t(o.createHtml()),o.components={oMask:o.$element,oContainer:t(".popup-container",o.$element),oHeader:t(".popup-header",o.$element),oContent:t(".popup-content",o.$element),oFooter:t(".popup-footer",o.$element)},o.options.fullScreen?o.components.oMask.addClass("full-screen"):o.components.oContainer.width(o.options.width),o.options.title&&o.components.oHeader.html(o.options.title),o.options.content&&o.components.oContent.html(o.options.content),o.options.button.length){var e=o.options.button,n="";for(var i in e)n+='<li style="width:'+100/e.length+'%;"><a href="javascript:;">'+e[i].text+"</a></li>";o.components.oFooter.html(n)}o.$element.appendTo("body"),t(".popup-footer>li",o.$element).each(function(e,n){t(n).on("click",function(t){var i=o.options.button[e].action;"function"==typeof i&&i(t,o,n,e)})}),t(o.$element).on({click:function(e){var n=e.target;if("mask"==t(n).data("role")&&0==o.options.modal&&o.close(),t(n).data("callback")){var i=o.options.callback&&o.options.callback[t(n).data("callback")];"function"==typeof i&&i(e,o)}}}),t(window).on("resize",function(){o.$element.hasClass("is-visible")&&o.show()})},createHtml:function(){var t=[];return t.push('<div class="popup" data-role="mask"><div class="popup-container">'),t.push('<div class="popup-header"></div>'),t.push('<div class="popup-content"></div>'),t.push('<ul class="popup-footer"></ul>'),t.join("")},show:function(){var o=this;if(o.$element.addClass("is-visible"),o.$element.addClass(o.options.className),o.options.fullScreen)o.components.oContent.height(t(window).height()-o.components.oHeader.height()-o.components.oFooter.height());else{var e=o.options.height;"auto"==o.options.height?(e=t(window).height()-80,o.components.oContainer.height()>e&&o.components.oContent.height(e-o.components.oHeader.height()-o.components.oFooter.height())):o.components.oContent.height(e),o.components.oContainer.css("margin-top",-o.components.oContainer.height()/2)}},hide:function(){this.$element.removeClass("is-visible")},remove:function(){this.$element.remove()},close:function(){var t=this.options.close;if("string"==typeof t)switch(t){case"remove":this.remove();break;case"hide":this.hide()}"function"==typeof t&&t(event,this)}};var e={};e.alert=function(o,e,n){var i=t.popup({title:o,content:e,modal:!0,className:"popup-css-alert",button:[{text:"确认",action:function(t,o,e,i){o.remove(),n&&n()}}]});return i.show(),i},e.confirm=function(o,e,n,i){var a=t.popup({title:o,content:e,modal:!0,className:"popup-css-confirm",button:[{text:"确认",action:function(t,o,e,i){n&&n(),o.remove()}},{text:"取消",action:function(t,o,e,n){o.remove(),i&&i()}}]});return a.show(),a},e.cute=function(o,e){var n=t.popup({content:o,modal:!1,className:"popup-css-cute"});return n.show(),0!=e&&(e=e||3e3,setTimeout(function(){n.remove()},e)),n},e.loadingPopup=null,e.loadingStart=function(){return o.loadingPopup=t.popup({className:"popup-css-loading",content:"",modal:!0}),o.loadingPopup.show(),o.loadingPopup},e.loadingStop=function(){o.loadingPopup&&o.loadingPopup.remove(),o.loadingPopup=null},e.select=function(o,e){var n=t("<ul class='popup-select-list'></ul>"),i=t(o);i.children().each(function(){var o=this.value,e=t(this).html(),i=this.selected,a=t("<li class='item' data-callback='selectCallback'></li>");o&&a.attr("data-value",o),e&&a.attr("data-text",e).html(e),i&&a.attr("selected","selected"),n.append(a)});var a=t.popup({title:"请选择",content:n,className:"popup-css-select",callback:{selectCallback:function(o,n){var a=t(o.target),s=a.data("value");n.remove();var l=i.val();i.val(s),l!=s&&i.trigger("change"),e&&e(s)}}});return a.show(),a},window.popup=e}(window.jQuery||window.Zepto);